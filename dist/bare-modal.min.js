export default class BareModal{init(){this.initModals(),this.initTimedModals(),this.initExternalTriggers()}initModals(){document.querySelectorAll("[data-modal-trigger]").forEach((t=>{const e=t.getAttribute("data-modal-trigger"),o=document.getElementById(e);t.addEventListener("click",(()=>{o.showModal(),document.body.classList.add("active-modal"),this.bindButtonActions(o,e)}))}))}initExternalTriggers(){document.querySelectorAll(".trigger-modal a").forEach((t=>{t.addEventListener("click",(e=>{e.preventDefault();const o=t.getAttribute("href").slice(1),a=document.getElementById(o);a&&(console.log("modal",a),a.showModal(),document.body.classList.add("active-modal"),this.bindButtonActions(a,o))}))}))}bindButtonActions(t,e){t.querySelectorAll("[data-modal-close], [data-modal-accept], [data-modal-cancel]").forEach((o=>{o.addEventListener("click",(o=>{let a="";o.target.hasAttribute("data-modal-close")?a="close":o.target.hasAttribute("data-modal-accept")?a="accept":o.target.hasAttribute("data-modal-cancel")&&(a="cancel");const i=t.getAttribute("data-modal-cookie-expire")||7;this.setCookie(`modalAction_${e}`,a,parseInt(i)),t.close(),document.body.classList.remove("active-modal")}))}))}initTimedModals(){document.querySelectorAll("dialog[data-modal-timed]").forEach((t=>{const e=t.getAttribute("data-modal-timed"),o=t.id;this.getCookie(`modalAction_${o}`)||setTimeout((()=>{t.showModal(),this.bindButtonActions(t,o),document.body.classList.add("active-modal")}),1e3*e)}))}setCookie(t,e,o){const a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);const i="expires="+a.toUTCString();document.cookie=`${t}=${e};${i};path=/`}getCookie(t){const e=`; ${document.cookie}`.split(`; ${t}=`);return 2===e.length?e.pop().split(";").shift():null}}